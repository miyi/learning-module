<!DOCTYPE html>
<html>
  <head>
    <title>Monaco Editor for HTML</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/editor/editor.main.css"
    />
    <link rel="stylesheet" href="index.css" />
    <!-- <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    /> -->
    <script src="index.js"></script>
    <script
      type="module"
      crossorigin="anonymous"
      src="dagger.js"
      defer
    ></script>
    <script type="dagger/modules">
      {
        js: "./index.js",
        inspection: "./inspection.js",
        navbar: "./myModules/navbar.html",
        lesson_styles: './lesson.css',
        intro_directives: '/intro-directives/index.html',
        esm_editor: {uri:'./monaco.esm.js', type: 'script', anonymous: false}
      }
    </script>
  </head>
  <body
    dg-cloak
    +loading="{
      languages: esm_editor.languages,
      editor: esm_editor.editor,
      editorValue: null,
      iframe: null,
      iframeBody: null,
      checking: false,
      scopeTree: null,
      side: null,
      starting_code: null
    }"
    +loaded="initLanguages(languages)"
  >
    <div id="mySidepanel" class="sidepanel" +loaded="side=$node">
      <a
        href="javascript:void(0)"
        class="closebtn"
        +click="side.style.width='0'"
        ><span class="material-icons">highlight_off</span></a
      >
      <a href="#">About</a>
      <a href="#">Services</a>
      <a href="#">Clients</a>
      <a href="#">Contact</a>
    </div>

    <navbar +loading="{sidepanel: side}"></navbar>
    <div id="outer" +loading="{src: 'readme.md'}">
      <div class="box-column" id="md">
        <intro_directives></intro_directives>
      </div>
      <div class="handle" +mouseDown=""></div>
      <div class="box-column" id="container">
        <div>
          <button
            class="icon-button"
            +click="editorValue=editor.getModels()[0].getValue()"
            data-title="Run Code"
          >
            <span class="material-icons"> play_arrow </span>
          </button>
          <button
            class="icon-button"
            +click="loadEditor(starting_code, $scope)"
            data-title="Reset Code"
          >
            <span class="material-icons"> replay </span>
          </button>
          <button
            class="icon-button"
            +click="downloadCode(editor)"
            data-title="Download Code"
          >
            <span class="material-icons"> file_download</span>
          </button>
        </div>

        <div
          class="editor"
          +loaded="editor=initEditor(editor, $node)"
        ></div>
      </div>
      <div class="handle"></div>
      <div class="box-column">
        <iframe
          id="htmlOutput"
          $src="getGeneratedPageURL(editorValue)"
          +loaded="iframe=$node"
        ></iframe>
      </div>
    </div>

    <!--    <div>-->
    <!--      <button-->
    <!--              +click="scopeTree = getScopeTree(iframe.contentWindow.document.body), console.log(scopeTree)"-->
    <!--      >-->
    <!--        get scope tree-->
    <!--      </button>-->
    <!--      <button-->
    <!--              +click="monaco.getModels()[0].setValue(test1), editorValue=editor.getValue()"-->
    <!--      >-->
    <!--        load test1-->
    <!--      </button>-->
    <!--      <button +click="loadTest(test2, $scope)">load test2</button>-->
    <!--      <div $each="data">-->
    <!--        <button +click="getData(item), editorValue=editor.getValue()">-->
    <!--          ${item}-->
    <!--        </button>-->
    <!--      </div>-->
    <!--    </div>-->
  </body>
  <script></script>
</html>
